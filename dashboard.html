<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡πÅ‡∏î‡∏ä‡∏ö‡∏≠‡∏£‡πå‡∏î | quizWeb</title>
<link href="https://fonts.googleapis.com/css2?family=Prompt:wght@400;500;600&display=swap" rel="stylesheet">

<style>
*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:'Prompt',sans-serif;
}

/* ===== Navbar ===== */
nav{
    background:#ffffff;
    padding:15px 40px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    box-shadow:0 2px 10px rgba(0,0,0,0.05);
}

.logo{
    font-weight:600;
    font-size:18px;
    color:#2d6a4f;
}

.nav-links a{
    margin-left:20px;
    text-decoration:none;
    color:#333;
    font-size:14px;
}

.nav-links a:hover{
    color:#2d6a4f;
}

/* ===== Layout ===== */
body{
    background:linear-gradient(135deg,#e8fdf5,#ffffff);
    min-height:100vh;
}

.content{
    padding:40px;
}

h2{
    text-align:center;
    color:#2d6a4f;
}

/* ===== Grid ===== */
.grid{
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(250px,1fr));
    gap:20px;
    margin-top:30px;
}

.card{
    background:white;
    padding:20px;
    border-radius:12px;
    box-shadow:0 8px 20px rgba(0,0,0,0.05);
    transition:0.3s;
    position:relative;
}

.card.new{
    border:2px solid #2d6a4f;
}

.card:hover{
    transform:translateY(-5px);
}

.code{
    font-size:20px;
    font-weight:600;
    color:#1b4332;
}

.date{
    font-size:13px;
    margin-top:8px;
    color:#555;
}

.delete-btn{
    position:absolute;
    top:10px;
    right:10px;
    background:#e63946;
    border:none;
    color:white;
    padding:5px 10px;
    border-radius:6px;
    cursor:pointer;
    font-size:12px;
}

.delete-btn:hover{
    background:#c1121f;
}

.empty{
    text-align:center;
    margin-top:40px;
    color:#555;
}

.top-btn{
    text-align:center;
    margin-top:30px;
}

.top-btn button{
    padding:10px 20px;
    border:none;
    border-radius:8px;
    background:#2d6a4f;
    color:white;
    cursor:pointer;
}
</style>
</head>

<body>

<!-- ===== Navbar ===== -->
<nav>
    <div class="logo">quizWeb</div>
    <div class="nav-links">
        <a href="index.html">‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
        <a href="dashboard.html">‡∏Ñ‡∏•‡∏±‡∏á‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö</a>
        <a href="create.html">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏¥‡∏ã</a>
        <span id="authArea"></span>
    </div>
</nav>

<div class="content">

<h2>üìö ‡∏Ñ‡∏•‡∏±‡∏á‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h2>

<div class="grid" id="quizGrid"></div>

<div class="empty" id="emptyMessage"></div>

<div class="top-btn">
    <button onclick="location.href='create.html'">+ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ñ‡∏ß‡∏¥‡∏ã‡πÉ‡∏´‡∏°‡πà</button>
</div>

</div>

<script>
/* ===== Navbar Auth ===== */
const authArea = document.getElementById("authArea");
const currentUser = localStorage.getItem("currentUser");

if(currentUser){
    authArea.innerHTML = `
        <span style="margin-left:20px;">üë§ ${currentUser}</span>
        <a href="#" onclick="logout()">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
    `;
}else{
    authArea.innerHTML = `
        <a href="login.html">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a>
        <a href="register.html">‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô</a>
    `;
}

function logout(){
    localStorage.removeItem("currentUser");
    window.location.href = "index.html";
}

/* ===== Dashboard Logic ===== */
function getQueryParam(param){
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(param);
}

function loadQuizzes(){
    const grid = document.getElementById("quizGrid");
    const emptyMsg = document.getElementById("emptyMessage");
    grid.innerHTML = "";

    let quizzes = JSON.parse(localStorage.getItem("myQuizzes")) || [];
    const newCode = getQueryParam("new");

    if(quizzes.length === 0){
        emptyMsg.innerHTML = "‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏™‡∏≠‡∏ö";
        return;
    }

    emptyMsg.innerHTML = "";

    quizzes.forEach((q,index) => {
        const card = document.createElement("div");
        card.className = "card";

        if(q.code === newCode){
            card.classList.add("new");
        }

        card.innerHTML = `
            <button class="delete-btn" onclick="deleteQuiz(${index})">‡∏•‡∏ö</button>
            <div class="code">üîë ${q.code}</div>
            <div class="date">üìÖ ${q.createdAt}</div>
        `;

        grid.appendChild(card);
    });
}

function deleteQuiz(index){
    let quizzes = JSON.parse(localStorage.getItem("myQuizzes")) || [];
    quizzes.splice(index,1);
    localStorage.setItem("myQuizzes", JSON.stringify(quizzes));
    loadQuizzes();
}

loadQuizzes();
</script>

</body>
</html>